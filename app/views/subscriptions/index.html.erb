<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><%= link_to "Accounts", accounts_path %></li>
    <li class="breadcrumb-item"><%= link_to @account.name, account_path(@account) %></li>
    <li class="breadcrumb-item active">Subscriptions</li>
  </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Subscriptions - <%= @account.name %></h1>
  <%= link_to "New Subscription", new_account_subscription_path(@account), class: "btn btn-primary" %>
</div>

<% if @subscriptions.any? %>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Product</th>
          <th>Licenses</th>
          <th>Used</th>
          <th>Available</th>
          <th>Issued</th>
          <th>Expires</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <% @subscriptions.each do |subscription| %>
          <tr class="<%= 'table-secondary' unless subscription.active? %>">
            <td><%= subscription.product.name %></td>
            <td><%= subscription.number_of_licenses %></td>
            <td><%= subscription.used_licenses_count %></td>
            <td><%= subscription.remaining_licenses %></td>
            <td><%= subscription.issued_at.strftime("%b %d, %Y") %></td>
            <td><%= subscription.expires_at.strftime("%b %d, %Y") %></td>
            <td>
              <% if subscription.active? %>
                <span class="badge bg-success">Active</span>
              <% else %>
                <span class="badge bg-secondary">Expired</span>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="alert alert-info">
    No subscriptions yet. <%= link_to "Create your first subscription", new_account_subscription_path(@account) %>.
  </div>
<% end %>

<%= link_to "Back to Account", account_path(@account), class: "btn btn-secondary mt-3" %>